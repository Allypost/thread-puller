<h1 class="no-select topbar">
    <a href="/<%= board -%>/">Back</a>
    <span id="download" data-shown="no" data-board="<%= board -%>" data-thread="<%= thread -%>"></span>
    <a href="<%= threadUrl -%>" target="_blank" rel="noopener noreferrer">Go to thread</a>
</h1>
<h1 class="no-select">Board:
    <span class="title-text">/<%= board -%>/</span>
</h1>
<h1 class="no-select">Thread:
    <span class="title-text"><%- postTitle -%></span>
</h1>

<% posts.filter((post) => post.file).forEach((post) => { -%>
    <%
        const postUrl = `https://boards.4chan.org/${post.board}/thread/${post.thread}#p${post.id}`;
        const isVideo = post.file.meta.isVideo;
        const loading = isVideo ? '' : 'loading';
    -%>
    <a href="<%- postUrl -%>" class="resource <%- loading -%>" target="_blank" rel="noopener noreferrer">
        <% if (isVideo) { -%>
            <%- include ./assets/video.ejs -%>
        <% } else { -%>
            <%- include ./assets/image.ejs -%>
        <% } -%>
    </a>
<% }) -%>

<script>
    (function () {
        Thread.init();
    })();
</script>
